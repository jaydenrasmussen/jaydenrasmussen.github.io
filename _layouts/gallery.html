<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title }}</title>
    {% include w3css.html %}
    {% include fa.html %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.6/featherlight.min.css" type="text/css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.6/featherlight.gallery.min.css" type="text/css" rel="stylesheet" />
</head>
<body>

{% include nav.html %}
<div class="photoCardsSmall w3-hide-medium w3-hide-large"></div>
<div class="photoCardsLarge w3-hide-small"></div>

{% include jquery.html %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.6/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.6/featherlight.gallery.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        var images =  [
            {% for image in page.images %}'{{ image.url }}'{% unless forloop.last %},{% endunless %}    
            {% endfor %}
        ]
        // GALLERY FUNCTIONS
        $(document).ready(function(){
            $('.gallery').featherlightGallery({
                gallery: {
                    fadeIn: 300,
                    fadeOut: 300
                },
                openSpeed:    300,
                closeSpeed:   300
            });

            var countToFour = 0
            for (i=0; i < images.length; i++) {
                
            // large gallery
                // Create the rows  
                if (i == 0) {
                    $('.photoCardsLarge').append("<div class='w3-row-padding w3-center w3-margin aRow' style='padding-top:46px'> ");
                } else if (countToFour == 4) {
                    $('.photoCardsLarge').append("<div class='w3-row-padding w3-center w3-margin aRow' style='padding-top:3px'> " );
                    countToFour = 0;
                }
                
            // small gallery
                if (i == 0) {
                    $('.photoCardsSmall').append(   "<div class='w3-row w3-center w3-margin' style='padding-top:46px'> " +  
                                    "<div class='w3-card-2'> " +
                                    "<a href='#' data-featherlight='" + images[i] + "'> " +
                                    "<img class='w3-round' src='" + images[i] + "' style='width:100%' >");

                } else {
                    $('.photoCardsSmall').append(   "<div class='w3-row w3-center w3-margin'> " +  
                                    "<div class='w3-card-2'> " +
                                    "<a href='#' data-featherlight='" + images[i] + "'> " +
                                    "<img class='w3-round' src='" + images[i] + "' style='width:100%' >");
                }
                countToFour++;
            }
            // Insert the images into the rows
            var j = 0;
            $('.aRow').each(function() {
                    for (i=0;i<4;i++) {
                        if (images[j]) {
                            $(this).append( "<div class='w3-quarter w3-container'> " +  
                                    "<div class='w3-card-2'> " +
                                    "<a href='#' data-featherlight='" + images[j] + "'> " +
                                    "<img class='w3-round' src='" + images[j] + "' style='width:100%' >"
                            );
                        }
                        j++;
                    }
                }
            )
        });
    </script>
</div>
</body>
</html>